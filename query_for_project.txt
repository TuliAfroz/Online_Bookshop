INSERT INTO author (author_id, author_name) VALUES (1, 'William Shakespeare');
INSERT INTO publisher (publisher_id, publisher_name) VALUES (1, 'Penguin Books');
INSERT INTO category (category_id, category_name) VALUES (1, 'Drama'), (2, 'Romance');

-- Step 1: Drop the existing constraint by name
ALTER TABLE bookcategory
DROP CONSTRAINT bookcategory_book_id_copy_no_fkey;

-- Step 2: Re-add it with ON DELETE CASCADE
ALTER TABLE bookcategory
ADD CONSTRAINT bookcategory_book_id_copy_no_fkey
FOREIGN KEY (book_id, copy_no)
REFERENCES book(book_id, copy_no)
ON DELETE CASCADE;


ALTER TABLE customer
ALTER COLUMN customer_id ADD GENERATED ALWAYS AS IDENTITY;

ALTER TABLE customer
ADD CONSTRAINT unique_customer_email UNIQUE (email);

